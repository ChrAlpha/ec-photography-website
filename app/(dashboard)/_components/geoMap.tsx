"use client";

import Map, { Layer, Source } from "react-map-gl";
import type { FillLayer } from "react-map-gl";
import type { FeatureCollection } from "geojson";

const TOKEN = process.env.NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN;

const geojson: FeatureCollection = {
  type: "FeatureCollection",
  features: [
    {
      type: "Feature",
      properties: {
        name: "China",
        photosCount: 0, // 可以在这里动态设置照片数量
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [80.2599902688853, 42.3499992945991],
            [80.1801501809943, 42.9200678574269],
            [80.8662064961013, 43.180362046881],
            [79.9661063984414, 44.9175169948046],
            [81.9470707539181, 45.3170274928531],
            [82.4589258157691, 45.5396495631665],
            [83.1804838398605, 47.3300312363509],
            [85.1642903991132, 47.0009557155161],
            [85.7204838398707, 47.4529694687731],
            [85.7682328633083, 48.455750637397],
            [86.5987764831034, 48.5491816269806],
            [87.3599703307627, 49.2149807806291],
            [87.7512642760767, 49.2971979844055],
            [88.0138322285517, 48.5994627956006],
            [88.8542977233468, 48.069081732773],
            [90.2808256367639, 47.6935490993079],
            [90.970809360725, 46.8881460638229],
            [90.5857682637183, 45.7197160914875],
            [90.9455395853343, 45.2860733099103],
            [92.1338908223182, 45.1150759954565],
            [93.4807336771413, 44.97547211362],
            [94.6889286641253, 44.3523318548284],
            [95.3068754414715, 44.2413308782655],
            [95.7624548685567, 43.3194491643946],
            [96.3493957865278, 42.7256352809287],
            [97.451757440178, 42.74888967546],
            [99.51581749878, 42.5246914739617],
            [100.845865513108, 42.6638044296915],
            [101.83304039918, 42.5148729518263],
            [103.312278273535, 41.9074681666676],
            [104.522281935649, 41.9083466660166],
            [104.964993931093, 41.5974095729164],
            [106.129315627062, 42.1343277044289],
            [107.744772576938, 42.4815158147819],
            [109.243595819131, 42.5194463160841],
            [110.412103306115, 42.871233628911],
            [111.12968224492, 43.4068340114002],
            [111.829587843881, 43.7431183945395],
            [111.667737257943, 44.0731757675877],
            [111.348376906379, 44.4574417181101],
            [111.8733061056, 45.1020793727351],
            [112.436062453259, 45.0116456162243],
            [113.463906691544, 44.8088931341271],
            [114.460331658996, 45.3398167994938],
            [115.9850964702, 45.727235012386],
            [116.717868280099, 46.3882024196152],
            [117.421701287914, 46.6727328558143],
            [118.874325799639, 46.8054120957237],
            [119.663269891439, 46.6926799586789],
            [119.772823927898, 47.0480587835501],
            [118.866574334795, 47.7470600449462],
            [118.064142694167, 48.0667304551037],
            [117.295507440257, 47.6977090521074],
            [116.308952671373, 47.8534101426028],
            [115.742837355616, 47.7265445013263],
            [115.485282017073, 48.1353825954034],
            [116.191802199368, 49.1345980901991],
            [116.678800897286, 49.8885313991214],
            [117.879244419426, 49.510983384797],
            [119.288460728026, 50.142882798862],
            [119.27939, 50.58292],
            [120.18208, 51.6435500000001],
            [120.7382, 51.96411],
            [120.725789015792, 52.5162263047309],
            [120.177088657717, 52.7538862168412],
            [121.00308475147, 53.2514010687312],
            [122.245747918793, 53.4317259792137],
            [123.57147, 53.4588],
            [125.06821129771, 53.1610448268689],
            [125.946348911646, 52.792798570357],
            [126.564399041857, 51.7842554795327],
            [126.939156528838, 51.3538941514059],
            [127.287455682485, 50.7397972682655],
            [127.6574, 49.7602700000001],
            [129.39781782442, 49.4406000840154],
            [130.582293328982, 48.7296874049761],
            [130.98726, 47.79013],
            [132.50669, 47.78896],
            [133.373595819228, 48.1834416774349],
            [135.026311476787, 48.4782298854439],
            [134.50081, 47.57845],
            [134.11235, 47.21248],
            [133.769643996313, 46.116926988299],
            [133.09712, 45.14409],
            [131.88345421766, 45.3211616074365],
            [131.02519, 44.96796],
            [131.288555129115, 44.1115196803483],
            [131.144687941615, 42.9299897324269],
            [130.63386640841, 42.9030146347705],
            [130.63999970691, 42.3950242752218],
            [129.994267205933, 42.9853868678438],
            [129.59666873588, 42.4249817978546],
            [128.052215203972, 41.994284572918],
            [128.208433058791, 41.4667715520825],
            [127.343782993683, 41.503151760416],
            [126.86908328665, 41.8165693222662],
            [126.182045119329, 41.1073361272764],
            [125.079941847841, 40.5698237167925],
            [124.265624627785, 39.9284933538342],
            [122.867570428561, 39.6377875839762],
            [122.131387974131, 39.1704517685447],
            [121.054554478033, 38.8974710149628],
            [121.585994907722, 39.3608535833241],
            [121.376757033373, 39.7502613388595],
            [122.168595005381, 40.422442531896],
            [121.640358514494, 40.9463898789033],
            [120.768628778162, 40.5933881699175],
            [119.639602085449, 39.8980559352142],
            [119.023463983233, 39.2523330755111],
            [118.042748651198, 39.2042739934797],
            [117.532702264477, 38.7376358098841],
            [118.05969852099, 38.0614755315611],
            [118.878149855628, 37.8973253443859],
            [118.911636183753, 37.4484638534987],
            [119.702802362142, 37.1563886581851],
            [120.823457472824, 37.870427761378],
            [121.711258579598, 37.4811233587072],
            [122.357937453298, 37.4544841578607],
            [122.519994744966, 36.9306143255019],
            [121.104163853033, 36.6513290471804],
            [120.637008905115, 36.1114395208111],
            [119.664561802246, 35.6097905543377],
            [119.151208123859, 34.9098591171604],
            [120.227524855634, 34.3603319361687],
            [120.620369093917, 33.3767227239251],
            [121.22901411345, 32.4603187118772],
            [121.90814578663, 31.6921743840746],
            [121.89191938689, 30.9493515080951],
            [121.264257440273, 30.6762674016487],
            [121.503519321785, 30.1429149439643],
            [122.092113885589, 29.8325204534032],
            [121.938428175953, 29.0180223658348],
            [121.684438511239, 28.2255126002066],
            [121.125661248866, 28.1356731226672],
            [120.395473260582, 27.0532068954493],
            [119.58549686084, 25.7407805445326],
            [118.656871372555, 24.5473908554002],
            [117.281606479971, 23.6245014510997],
            [115.890735304835, 22.7828732365781],
            [114.763827345846, 22.6680740422417],
            [114.152546828266, 22.2237600773962],
            [113.806779819801, 22.5483397486214],
            [113.241077915502, 22.0513674992705],
            [111.843592157032, 21.5504936792815],
            [110.785465529424, 21.3971438664553],
            [110.444039341272, 20.3410326197063],
            [109.889861281374, 20.2824573837035],
            [109.627655063925, 21.0082270370267],
            [109.864488153118, 21.3950509709475],
            [108.522812941524, 21.7152123072118],
            [108.050180291783, 21.5523798690601],
            [107.043420037873, 21.8118989120299],
            [106.567273390735, 22.2182048609248],
            [106.725403273548, 22.7942678898984],
            [105.811247186305, 22.9768924016179],
            [105.329209425887, 23.3520633000569],
            [104.476858351664, 22.819150092047],
            [103.504514601661, 22.7037566187392],
            [102.7069922221, 22.7087950708877],
            [102.170435825614, 22.4647531193893],
            [101.652017856862, 22.3181987574095],
            [101.803119744883, 21.1743667668451],
            [101.27002566936, 21.2016519230952],
            [101.180005324308, 21.436572984294],
            [101.150032993578, 21.849984442629],
            [100.416537713627, 21.5588394230966],
            [99.9834892110215, 21.7429367131364],
            [99.2408988789873, 22.1183143173046],
            [99.5319922220874, 22.9490388046126],
            [98.8987492207828, 23.1427220728425],
            [98.6602624857558, 24.06328603769],
            [97.604719679762, 23.897404690033],
            [97.7246090026791, 25.083637193293],
            [98.6718380065892, 25.9187025009135],
            [98.7120939473445, 26.7435358749403],
            [98.6826900573705, 27.5088121607506],
            [98.2462309102333, 27.7472213811292],
            [97.9119877461694, 28.3359451360143],
            [97.32711388549, 28.2615827499463],
            [96.2488334492878, 28.4110309921344],
            [96.5865906107475, 28.8309795191543],
            [96.117678664131, 29.4528020289225],
            [95.4048022806646, 29.0317166203921],
            [94.5659904317029, 29.27743805594],
            [93.4133476094327, 28.6406293808072],
            [92.5031189310436, 27.8968763290465],
            [91.6966565286967, 27.7717418482517],
            [91.2588537943199, 28.0406143254663],
            [90.7305139505678, 28.0649539250758],
            [90.0158288919712, 28.2964385035272],
            [89.4758101745211, 28.0427588974064],
            [88.8142484883206, 27.2993159042394],
            [88.7303259622786, 28.0868647323675],
            [88.1204407083699, 27.8765416529396],
            [86.9545170430006, 27.9742617864035],
            [85.8233199401315, 28.2035759546987],
            [85.011638218123, 28.6427739527473],
            [84.2345797057502, 28.8398937037247],
            [83.8989929544467, 29.3202261418777],
            [83.3371151061372, 29.4637315943522],
            [82.3275126484509, 30.1152680526881],
            [81.5258044778747, 30.4227169866086],
            [81.1112561380293, 30.1834809433134],
            [79.7213668151071, 30.8827147486547],
            [78.738894484374, 31.5159060735271],
            [78.458446486326, 32.6181643743127],
            [79.1761287779955, 32.4837798121377],
            [79.2088916360686, 32.9943946396137],
            [78.8110864602857, 33.5061980250324],
            [78.9122689147132, 34.3219363469758],
            [77.8374507994746, 35.4940095077878],
            [76.1928483417857, 35.8984034286878],
            [75.8968974140501, 36.6668061386518],
            [75.1580277851409, 37.1330309107891],
            [74.9800024758954, 37.4199901393059],
            [74.8299857929521, 37.9900070257014],
            [74.8648157083168, 38.3788463404816],
            [74.2575142760227, 38.6065068629435],
            [73.9288521666464, 38.5058153346227],
            [73.6753792662548, 39.4312368841056],
            [73.9600130553184, 39.6600084498617],
            [73.8222436868283, 39.8939734970632],
            [74.7768624205561, 40.3664252792916],
            [75.4678279967307, 40.5620722519487],
            [76.5263680357975, 40.4279460719351],
            [76.9044844908771, 41.0664859075497],
            [78.187196893226, 41.1853158636048],
            [78.5436609231753, 41.5822425400387],
            [80.1194303730514, 42.1239407415383],
            [80.2599902688853, 42.3499992945991],
          ],
        ],
      },
    },
  ],
};

const layerStyle: FillLayer = {
  id: "country-fill",
  type: "fill",
  paint: {
    "fill-color": "#0ea5e9",
    "fill-opacity": 0.5,
  },
};

const GeoMap = () => {
  return (
    <Map
      id="map"
      mapboxAccessToken={TOKEN}
      initialViewState={{
        zoom: 0,
      }}
      doubleClickZoom={false}
      scrollZoom={false}
      dragPan={false}
      boxZoom={false}
      style={{
        width: "100%",
        height: "100%",
      }}
      mapStyle="mapbox://styles/ecarry/cldmhu6tr000001n33ujbxf7j"
    >
      <Source id="my-data" type="geojson" data={geojson}>
        <Layer {...layerStyle} />
      </Source>
    </Map>
  );
};

export default GeoMap;
